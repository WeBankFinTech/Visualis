<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edp.davinci.dao.DisplaySlideMapper" >
  <insert id="insert" parameterType="edp.davinci.model.DisplaySlide" >
    <selectKey resultType="java.lang.Long" order="AFTER" keyProperty="id">
      SELECT LAST_INSERT_ID() AS id
    </selectKey>
    insert into display_slide
    <trim prefix="(" suffix=")" suffixOverrides="," >
      display_id,
      `index`,
      config
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      #{displayId,jdbcType=BIGINT},
      #{index,jdbcType=INTEGER},
      #{config,jdbcType=LONGVARCHAR}
    </trim>
  </insert>

  <update id="updateBatch" parameterType="java.util.List">
    <foreach collection="list" item="item" index="index" open="" close="" separator=";">
      update display_slide
      <set>
        display_id=#{item.displayId,jdbcType=BIGINT},
        `index`=#{item.index,jdbcType=INTEGER},
        `config`=#{item.config,jdbcType=LONGVARCHAR},
      </set>
      <where>
        id=#{item.id,jdbcType=BIGINT}
      </where>
    </foreach>
  </update>

</mapper>