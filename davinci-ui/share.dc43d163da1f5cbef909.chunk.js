(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"162badf8105dc7af2987":function(e,t,n){"use strict";var a=n("8af190b70a6bc55c6f1b"),r=n.n(a),o=n("0d7f0986bcd2f33d8a2a"),c=n.n(o),i=n("d7dd51e1bf6bfc2c9c3d"),s=n("a28fc3c963a1d4d1a2e5"),l=n("ab4cb61bcb2dc161defb"),u=n("811a4999285c4f950f0a"),d=n("fe25efaa8d6f45e3f5f9"),f=n("54f683fcda7806277002"),b="davinci/Share/LOAD_SHARE_DASHBOARD",p="davinci/Share/LOAD_SHARE_DASHBOARD_SUCCESS",g="davinci/Share/LOAD_SHARE_DASHBOARD_FAILURE",m="davinci/Share/SET_INDIVIDUAL_DASHBOARD",h="davinci/Share/LOAD_SHARE_WIDGET",y="davinci/Share/LOAD_SHARE_WIDGET_SUCCESS",v="davinci/Share/LOAD_SHARE_RESULTSET",O="davinci/Share/LOAD_SHARE_RESULTSET_SUCCESS",S="davinci/Share/LOAD_WIDGET_CSV",I="davinci/Share/LOAD_WIDGET_CSV_SUCCESS",w="davinci/Share/LOAD_WIDGET_CSV_FAILURE",j="davinci/Share/LOAD_CASCADESOURCE_FROM_DASHBOARD",A="davinci/Share/LOAD_CASCADESOURCE_FROM_DASHBOARD_SUCCESS",D="davinci/Share/LOAD_CASCADESOURCE_FROM_DASHBOARD_FAILURE",L="davinci/Share/RESIZE_ALL_DASHBOARDITEM",_="davinci/Dashboard/DRILL_DASHBOARDITEM",E="davinci/Dashboard/DELETE_DRILL_HISTORY";function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=Object(f.fromJS)({dashboard:null,title:"",config:"{}",dashboardCascadeSources:null,widgets:null,items:null,itemsInfo:null});var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=e.get("dashboardCascadeSources"),o=e.get("itemsInfo"),c=e.get("widgets");switch(n){case p:return e.set("title",a.dashboard.name).set("dashboard",a.dashboard).set("config",a.dashboard.config).set("dashboardCascadeSources",{}).set("widgets",a.dashboard.widgets).set("items",a.dashboard.relations).set("itemsInfo",a.dashboard.relations.reduce(function(e,t){return e[t.id]={datasource:{resultList:[]},loading:!1,queryParams:{linkageFilters:[],globalFilters:[],params:[],linkageParams:[],globalParams:[]},downloadCsvLoading:!1,interactId:"",renderType:"rerender"},e},{}));case m:return e.set("items",[{id:1,x:0,y:0,width:12,height:12,polling:!1,frequency:0,widgetId:a.widgetId,dataToken:a.token}]).set("itemsInfo",{1:{datasource:{resultList:[]},loading:!1,queryParams:{linkageFilters:[],globalFilters:[],params:[],linkageParams:[],globalParams:[]},downloadCsvLoading:!1,interactId:"",renderType:"rerender"}});case y:return c||(c=[]),console.log(c.concat(a.widget)),e.set("widgets",c.concat(a.widget));case v:return e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{loading:!0,queryParams:Object.assign({},o[a.itemId].queryParams,{linkageFilters:a.params.linkageFilters,globalFilters:a.params.globalFilters,params:a.params.params,linkageParams:a.params.linkageParams,globalParams:a.params.globalParams})}))));case _:return o[a.itemId].queryParams.drillHistory||(o[a.itemId].queryParams.drillHistory=[]),e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{queryParams:Object.assign({},o[a.itemId].queryParams,{drillHistory:o[a.itemId].queryParams.drillHistory.concat(a.drillHistory)})}))));case E:return e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{queryParams:Object.assign({},o[a.itemId].queryParams,{drillHistory:o[a.itemId].queryParams.drillHistory.slice(0,a.index+1)})}))));case O:return e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{loading:!1,datasource:a.resultset||{resultList:[]},renderType:a.renderType}))));case S:return e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{downloadCsvLoading:!0}))));case I:case w:return e.set("itemsInfo",Object.assign({},o,P({},a.itemId,Object.assign({},o[a.itemId],{downloadCsvLoading:!1}))));case A:return e.set("dashboardCascadeSources",Object.assign({},r,P({},a.controlId,a.values)));case L:return e.set("itemsInfo",Object.entries(o).reduce(function(e,t){var n=k(t,2),a=n[0],r=n[1];return e[a]=Object.assign({},r,{renderType:"resize",datasource:Object.assign({},r.datasource)}),e},{}));default:return e}},T=n("74431d47afb6248fcb69"),F=n("6c68d13fe9e3e77d8fc4");function x(e){return{type:p,payload:{dashboard:e}}}function H(e){return{type:y,payload:{widget:e}}}function U(e,t,n){return{type:O,payload:{renderType:e,itemId:t,resultset:n}}}function q(e){return{type:I,payload:{itemId:e}}}function Y(e){return{type:w,payload:{itemId:e}}}function W(e,t,n){return{type:A,payload:{controlId:e,columns:t,values:n}}}var N=n("95066b9b78a83cfbe91a"),z=n("55c69f0ea731e712b8f3"),G=n("959a9acaa46191dd629e"),B=n("eb331aa378875c02c40d"),J=regeneratorRuntime.mark($),M=regeneratorRuntime.mark(ee),V=regeneratorRuntime.mark(te),K=regeneratorRuntime.mark(ne),Q=regeneratorRuntime.mark(ae),Z=regeneratorRuntime.mark(re),X=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n};B.a[B.b].shareHost;function $(e){var t,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(F.b)(N.a,"".concat(G.a.share,"/dashboard/").concat(t.token));case 4:return n=a.sent,a.next=7,Object(F.c)(x(n.payload));case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(F.c)({type:g});case 13:t.reject(a.t0);case 14:case"end":return a.stop()}},J,this,[[1,9]])}function ee(e){var t,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(F.b)(N.a,"".concat(G.a.share,"/widget/").concat(t.token));case 4:return n=a.sent,a.next=7,Object(F.c)(H(n.payload));case 7:t.resolve&&t.resolve(n.payload),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),Object(z.a)(a.t0),t.reject(a.t0);case 14:case"end":return a.stop()}},M,this,[[1,10]])}function te(e){var t,n,a,r,o,c,i,s,l,u,d,f,b;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.renderType,a=t.itemId,r=t.dataToken,o=t.params,c=o.filters,i=o.linkageFilters,s=o.globalFilters,l=o.params,u=o.linkageParams,d=o.globalParams,f=X(o,["filters","linkageFilters","globalFilters","params","linkageParams","globalParams"]),p.prev=3,p.next=6,Object(F.b)(N.a,{method:"post",url:"".concat(G.a.share,"/data/").concat(r),data:Object.assign({},f,{filters:c.concat(i).concat(s),params:l.concat(u).concat(d)})});case 6:return b=p.sent,p.next=9,Object(F.c)(U(n,a,b.payload));case 9:p.next=14;break;case 11:p.prev=11,p.t0=p.catch(3),Object(z.a)(p.t0);case 14:case"end":return p.stop()}},V,this,[[3,11]])}function ne(e){var t,n,a,r,o,c,i,s,l,u,d,f;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.itemId,a=t.params,r=t.token,o=a.filters,c=a.linkageFilters,i=a.globalFilters,s=a.params,l=a.linkageParams,u=a.globalParams,d=X(a,["filters","linkageFilters","globalFilters","params","linkageParams","globalParams"]),b.prev=2,b.next=5,Object(F.b)(N.a,{method:"post",url:"".concat(G.a.share,"/csv/").concat(r),data:Object.assign({},d,{filters:o.concat(c).concat(i),params:s.concat(l).concat(u)})});case 5:return f=b.sent,b.next=8,Object(F.c)(q(n));case 8:location.href=f.payload,b.next=16;break;case 11:return b.prev=11,b.t0=b.catch(2),b.next=15,Object(F.c)(Y(n));case 15:Object(z.a)(b.t0);case 16:case"end":return b.stop()}},K,this,[[2,11]])}function ae(e){var t,n,a,r,o,c,i,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,t=e.payload,n=t.controlId,a=t.viewId,r=t.dataToken,o=t.columns,c=t.parents,i={columns:o,parents:c},l.next=6,Object(F.b)(N.a,{method:"post",url:"".concat(G.a.share,"/data/").concat(r,"/distinctvalue/").concat(a),data:i});case 6:return s=l.sent,l.next=9,Object(F.c)(W(n,o,s.payload));case 9:l.next=16;break;case 11:return l.prev=11,l.t0=l.catch(0),l.next=15,Object(F.c)((u=l.t0,{type:D,payload:{error:u}}));case 15:Object(z.a)(l.t0);case 16:case"end":return l.stop()}var u},Q,this,[[0,11]])}function re(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[Object(T.c)(b,$),Object(T.b)(h,ee),Object(T.b)(v,te),Object(T.c)(S,ne),Object(T.b)(j,ae)];case 2:case"end":return e.stop()}},Z,this)}var oe=n("6c1890243ba884c62600"),ce=n("38669f46145e5bedaa8f"),ie=n("cd16e7d68404f3230c38"),se=n("86d17dd26e83afa66ef9"),le=n("d13558d97f410e04ee44"),ue=n("baf4d34fa10fe29cc89b"),de=n("ab77426700a64afb515f"),fe=n.n(de),be=n("4634762afad890a7174e"),pe=n.n(be),ge=function(e){return e.get("shareDashboard")},me=n("e54a068d600ce8162b8c"),he=n("545cc1d5b2c0ab4381ef"),ye=n("faa1775c23cdc998dbb4"),ve=n("6b84bc0ba52f69619b39"),Oe=n("21700e306353b2e19c0b"),Se=n.n(Oe);function Ie(e){return(Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function je(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=n("f3ae47cf584ff0a4203b"),_e=n("788b454b5eadc7b7f231"),Ee=a.createElement(c.a,{title:"Login"}),ke=a.createElement(Se.a,{type:"loading"}),Pe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=je(this,Ae(t).call(this,e))).changeUsername=function(e){n.setState({username:e.target.value.trim()})},n.changePassword=function(e){n.setState({password:e.target.value})},n.doLogin=function(){var e=n.props,t=e.onLogin,a=e.shareInfo,r=e.legitimateUser,o=n.state,c=o.username,i=o.password;c&&i&&t(c,i,a,function(){r()})},n.state={username:"",password:""},n}var r,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,a["PureComponent"]),r=t,(o=[{key:"render",value:function(){var e=this.props.loginLoading,t=this.state,r=t.username,o=t.password;return a.createElement("div",{className:"".concat(Le.container," ").concat(Le.share)},Ee,a.createElement("img",{className:Le.logo,src:n("43a863c5e801a2996d08")}),a.createElement("div",{className:"".concat(Le.window," ").concat(_e.window)},a.createElement(ye.a,{username:r,password:o,onChangeUsername:this.changeUsername,onChangePassword:this.changePassword,onLogin:this.doLogin}),a.createElement("button",{disabled:e,onClick:this.doLogin},e?ke:"","\u767b \u5f55")))}}])&&we(r.prototype,o),c&&we(r,c),t}();var Re=Object(i.connect)(null,function(e){return{onLogin:function(t,n,a,r){return e(Object(ve.b)(t,n,a,r))}}})(Pe);function Ce(e){return(Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function He(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ue(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=n("c7b06d3320a5509f12ff"),Ne=Object(le.b)(le.a),ze=r.a.createElement("h3",null,"\u6570\u636e\u52a0\u8f7d\u4e2d\u2026\u2026"),Ge=r.a.createElement("div",{id:"phantomRenderSign"}),Be=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,qe(t).call(this,e))).interactCallbacks={},n.interactingLinkagers={},n.interactGlobalFilters={},n.resizeSign=0,n.loadShareContent=function(e){var t=n.props,a=t.onLoadDashboard,r=t.onLoadWidget,o=t.onSetIndividualDashboard;"dashboard"===e.type?a(e.shareInfo,function(e){403===e.response.status&&n.setState({showLogin:!0})}):r(e.shareInfo,function(t){o(t.id,e.shareInfo)},function(e){403===e.response.status&&n.setState({showLogin:!0})})},n.getQs=function(e){return e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},n.getChartData=function(e,t,a,r){n.getData(n.props.onLoadResultset,e,t,a,r)},n.downloadCsv=function(e,t,a){n.getData(function(e,t,a,r){n.props.onLoadWidgetCsv(t,r,a)},"rerender",e,t)},n.getData=function(e,t,a,r,o){var c,i,s,l,u,d,f=n.props,b=f.currentItemsInfo,p=f.widgets.find(function(e){return e.id===r}),g=JSON.parse(p.config),m=g.cols,h=g.rows,y=g.metrics,v=g.filters,O=g.color,S=g.label,I=g.size,w=g.xAxis,j=g.tip,A=g.orders,D=g.cache,L=g.expired,_=b[a].queryParams;o?(c=void 0!==o.linkageFilters?o.linkageFilters:_.linkageFilters,i=void 0!==o.globalFilters?o.globalFilters:_.globalFilters,s=o.params?o.params:_.params,l=o.linkageParams||_.linkageParams,u=o.globalParams||_.globalParams,d=o.drillStatus||void 0):(c=_.linkageFilters,i=_.globalFilters,s=_.params,l=_.linkageParams,u=_.globalParams);var E=m.concat(h).filter(function(e){return"\u6307\u6807\u540d\u79f0"!==e.name}).map(function(e){return e.name}),k=y.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}});O&&(E=E.concat(O.items.map(function(e){return e.name}))),S&&(E=E.concat(S.items.filter(function(e){return"category"===e.type}).map(function(e){return e.name})),k=k.concat(S.items.filter(function(e){return"value"===e.type}).map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),I&&(k=k.concat(I.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),w&&(k=k.concat(w.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),j&&(k=k.concat(j.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),e(t,a,p.dataToken,{groups:d&&d.groups?d.groups:E,aggregators:k,filters:d&&d.filter?d.filter.sqls:v.map(function(e){return e.config.sql}),linkageFilters:c,globalFilters:i,params:s,linkageParams:l,globalParams:u,orders:A,cache:D,expired:L})},n.onWindowResize=function(){n.resizeSign&&clearTimeout(n.resizeSign),n.resizeSign=window.setTimeout(function(){n.props.onResizeAllDashboardItem(),clearTimeout(n.resizeSign),n.resizeSign=0},500)},n.visibleFullScreen=function(e){var t=n.state.allowFullScreen;e&&n.setState({currentDataInFullScreen:e}),n.setState({allowFullScreen:!t})},n.currentWidgetInFullScreen=function(e){var t=n.props,a=t.currentItems,r=t.currentItemsInfo,o=t.widgets,c=a.find(function(t){return t.id===e}),i=o.find(function(e){return e.id===c.widgetId}),s=r[e],l=r.loading;n.setState({currentDataInFullScreen:{itemId:e,widgetId:i.id,widget:i,data:s,loading:l,onGetChartData:n.getChartData}})},n.handleLegitimateUser=function(){var e=n.state,t=e.type,a=e.shareInfo;n.setState({showLogin:!1},function(){n.loadShareContent({type:t,shareInfo:a})})},n.checkInteract=function(e){return n.props.linkages.some(function(t){return+t.trigger[0]===e})},n.doInteract=function(e,t){var a=n.props,r=a.currentItems,o=a.linkages,c=Object(ce.a)(e,o);n.interactingLinkagers=Object(ce.b)(e,t,c,n.interactingLinkagers),Object.keys(c).forEach(function(e){var t=r.find(function(t){return t.id===+e}),a=n.interactingLinkagers[e],o=a.filters,c=a.params;n.getChartData("rerender",+e,t.widgetId,{linkageFilters:Object.values(o).reduce(function(e,t){return e.concat.apply(e,xe(t))},[]),linkageParams:Object.values(c).reduce(function(e,t){return e.concat.apply(e,xe(t))},[])})}),n.setState({interactingStatus:Object.assign({},n.state.interactingStatus,Fe({},e,!0))})},n.turnOffInteract=function(e){var t=n.props,a=t.linkages,r=t.currentItems;Object(ce.c)(e,a,n.interactingLinkagers).forEach(function(e){var t=r.find(function(t){return t.id===e}),a=n.interactingLinkagers[e],o=a.filters,c=a.params;n.getChartData("rerender",e,t.widgetId,{linkageFilters:Object.values(o).reduce(function(e,t){return e.concat.apply(e,xe(t))},[]),linkageParams:Object.values(c).reduce(function(e,t){return e.concat.apply(e,xe(t))},[])})}),n.setState({interactingStatus:Object.assign({},n.state.interactingStatus,Fe({},e,!1))})},n.getOptions=function(e,t,a,r){n.props.onLoadCascadeSourceFromDashboard(e,t,n.state.shareInfo,a,r)},n.globalFilterChange=function(e){var t=n.props.currentItems;Object.entries(e).forEach(function(e){var a=Te(e,2),r=a[0],o=a[1],c=t.find(function(e){return e.id===+r}),i=o.params,s=o.filters;n.getChartData("rerender",+r,c.widgetId,{globalParams:i,globalFilters:s})})},n.dataDrill=function(e){var t=n.props,a=t.widgets,r=t.currentItemsInfo,o=t.onDrillDashboardItem,c=e.itemId,i=e.groups,s=e.widgetId,l=e.sourceDataFilter,u=a.find(function(e){return e.id===s}),d=JSON.parse(u.config),f=d.cols,b=d.rows,p=d.metrics,g=(d.filters,d.color),m=d.label,h=(d.size,d.xAxis,d.tip,d.orders,d.cache,d.expired,r[c].queryParams.drillHistory),y=void 0,v=void 0,O=void 0,S=f.concat(b).filter(function(e){return"\u6307\u6807\u540d\u79f0"!==e.name}).map(function(e){return e.name}),I=p.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}});g&&(S=S.concat(g.items.map(function(e){return e.name}))),m&&(S=S.concat(m.items.filter(function(e){return"category"===e.type}).map(function(e){return e.name})),I=I.concat(m.items.filter(function(e){return"value"===e.type}).map(function(e){return{column:Object(me.e)(e.name),func:e.agg}})));var w=void 0;if(h&&0!==h.length){var j=h[h.length-1];v=j.groups[j.groups.length-1],O=l.map(function(e){return e[v]}),y="".concat(v," in (").concat(O.map(function(e){return"'".concat(e,"'")}).join(","),")");var A=j.filter.sqls.concat(y),D=j.groups.some(function(e){return e===i});w={filter:{filterSource:O,name:v,sql:y,sqls:A,visualType:"string"},type:D?"up":"down",groups:D?j.groups.filter(function(e){return e!==i}):j.groups.concat([i]),name:i}}else{if(d){if("col"===d.dimetionAxis){var L=d.cols;v=L[L.length-1]}else{var _=d.rows;v=_[_.length-1]}O=l.map(function(e){return e&&e[v]?e[v]:e}),y="".concat(v," in (").concat(O.map(function(e){return"'".concat(e,"'")}).join(","),")")}var E=d.filters.map(function(e){return e.config.sql});E.push(y);var k=S.some(function(e){return e===i});w={filter:{filterSource:O,name:v,sql:y,sqls:E,visualType:"string"},type:k?"up":"down",groups:k?S.filter(function(e){return e!==i}):S.concat([i]),name:i}}o(c,w),n.getChartData("rerender",c,s,{drillStatus:w})},n.selectDrillHistory=function(e,t,a,r){var o=n.props,c=(o.currentItemsInfo,o.onDeleteDrillHistory);e?n.getChartData("rerender",a,r,{drillStatus:e}):(console.log("callback"),n.getChartData("rerender",a,r)),c(a,t)},n.state={mounted:!1,type:"",shareInfo:"",modalLoading:!1,interactingStatus:{},allowFullScreen:!1,currentDataInFullScreen:{},showLogin:!1,phantomRenderSign:!1},n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentWillMount",value:function(){var e=this.getQs(location.href.substr(location.href.indexOf("?")+1));this.setState({type:e.type,shareInfo:e.shareInfo}),this.loadShareContent(e)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onWindowResize,!1),this.setState({mounted:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.currentItems,a=e.currentItemsInfo;a&&Object.values(a).filter(function(e){return!!e.datasource.resultList.length}).length===n.length&&setTimeout(function(){t.setState({phantomRenderSign:!0})},5e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.dashboard,o=n.title,i=n.currentItems,s=n.currentItemsInfo,l=n.widgets,u=n.dashboardCascadeSources,d=this.state,f=d.mounted,b=(d.shareInfo,d.showLogin),p=d.interactingStatus,g=d.allowFullScreen,m=d.phantomRenderSign,h=null,y=null;if(i){var v=[],O={lg:[]};i.forEach(function(e){var n=e.id,a=e.x,o=e.y,c=e.width,i=e.height,u=e.widgetId,d=e.polling,f=e.frequency,b=s[n],g=b.datasource,m=b.loading,h=b.downloadCsvLoading,y=b.renderType,S=l.find(function(e){return e.id===u}),I={model:S.model},w=p[n]||!1,j=s[n].queryParams.drillHistory?s[n].queryParams.drillHistory:void 0;v.push(r.a.createElement("div",{key:n},r.a.createElement(ie.a,{itemId:n,widget:S,view:I,datasource:g,loading:m,polling:d,onDrillData:t.dataDrill,onSelectDrillHistory:t.selectDrillHistory,interacting:w,drillHistory:j,frequency:f,shareInfo:S.dataToken,downloadCsvLoading:h,onGetChartData:t.getChartData,onDownloadCsv:t.downloadCsv,onTurnOffInteract:t.turnOffInteract,onCheckTableInteract:t.checkInteract,onDoTableInteract:t.doInteract,onShowFullScreen:t.visibleFullScreen,renderType:y,container:"share"}))),O.lg.push({x:a,y:o,w:c,h:i,i:"".concat(n)})}),h=r.a.createElement(Ne,{className:"layout",style:{marginTop:"-16px"},rowHeight:he.x,margin:[he.w,he.w],breakpoints:he.u,cols:he.v,layouts:O,measureBeforeMount:!1,useCSSTransforms:f,isDraggable:!1,isResizable:!1},v),y=r.a.createElement(se.a,{widgets:l,currentDashboard:{widgets:i},currentItemsInfo:s,visible:g,isVisible:this.visibleFullScreen,currentDataInFullScreen:this.state.currentDataInFullScreen,onCurrentWidgetInFullScreen:this.currentWidgetInFullScreen})}else h=r.a.createElement("div",{className:We.shareContentEmpty},ze),y="";e=b?r.a.createElement(Re,{shareInfo:this.state.shareInfo,legitimateUser:this.handleLegitimateUser}):"";var S=m&&Ge;return r.a.createElement(oe.a,null,r.a.createElement(c.a,{title:o}),r.a.createElement(oe.a.Title,null,r.a.createElement(fe.a,null,r.a.createElement(pe.a,{span:24},r.a.createElement("h2",{className:We.shareTitle},o))),r.a.createElement(ue.a,{currentDashboard:a,currentItems:i,onGetOptions:this.getOptions,mapOptions:u,onChange:this.globalFilterChange})),h,r.a.createElement("div",{className:We.gridBottom}),y,e,S)}}])&&He(n.prototype,a),o&&He(n,o),t}(),Je=Object(s.b)({dashboard:Object(s.a)(ge,function(e){return e.get("dashboard")}),title:Object(s.a)(ge,function(e){return e.get("title")}),config:Object(s.a)(ge,function(e){return e.get("config")}),widgets:Object(s.a)(ge,function(e){return e.get("widgets")}),currentItems:Object(s.a)(ge,function(e){return e.get("items")}),currentItemsInfo:Object(s.a)(ge,function(e){return e.get("itemsInfo")}),dashboardCascadeSources:Object(s.a)(ge,function(e){return e.get("dashboardCascadeSources")}),linkages:Object(s.a)(ge,function(e){var t=e.get("config");if(!t)return[];var n=JSON.parse(t||{}).linkages;if(!n)return[];var a=e.get("itemsInfo");return n.filter(function(e){var t=e.linkager,n=e.trigger;return a[t[0]]&&a[n[0]]})})});var Me,Ve=Object(i.connect)(Je,function(e){return{onLoadDashboard:function(t,n){return e(function(e,t){return{type:b,payload:{token:e,reject:t}}}(t,n))},onLoadWidget:function(t,n,a){return e(function(e,t,n){return{type:h,payload:{token:e,resolve:t,reject:n}}}(t,n,a))},onLoadResultset:function(t,n,a,r){return e(function(e,t,n,a){return{type:v,payload:{renderType:e,itemId:t,dataToken:n,params:a}}}(t,n,a,r))},onSetIndividualDashboard:function(t,n){return e(function(e,t){return{type:m,payload:{widgetId:e,token:t}}}(t,n))},onLoadWidgetCsv:function(t,n,a){return e(function(e,t,n){return{type:S,payload:{itemId:e,params:t,token:n}}}(t,n,a))},onLoadCascadeSourceFromDashboard:function(t,n,a,r,o){return e(function(e,t,n,a,r){return{type:j,payload:{controlId:e,viewId:t,dataToken:n,columns:a,parents:r}}}(t,n,a,r,o))},onResizeAllDashboardItem:function(){return e({type:L})},onDrillDashboardItem:function(t,n){return e(function(e,t){return{type:_,payload:{itemId:e,drillHistory:t}}}(t,n))},onDeleteDrillHistory:function(t,n){return e(function(e,t){return{type:E,payload:{itemId:e,index:t}}}(t,n))}}}),Ke=Object(u.a)({key:"shareDashboard",reducer:C}),Qe=Object(d.a)({key:"shareDashboard",saga:re}),Ze=Object(l.compose)(Ke,Qe,Ve)(Be);!function(e){e.LOAD_SHARE_DISPLAY="davinci/Share/LOAD_SHARE_DISPLAY",e.LOAD_SHARE_DISPLAY_SUCCESS="davinci/Share/LOAD_SHARE_DISPLAY_SUCCESS",e.LOAD_SHARE_DISPLAY_FAILURE="davinci/Share/LOAD_SHARE_DISPLAY_FAILURE",e.LOAD_LAYER_DATA="davinci/Share/LOAD_LAYER_DATA",e.LOAD_LAYER_DATA_SUCCESS="davinci/Share/LOAD_LAYER_DATA_SUCCESS",e.LOAD_LAYER_DATA_FAILURE="davinci/Share/LOAD_LAYER_DATA_FAILURE"}(Me||(Me={}));var Xe=n("af45b63fe9fc857a79a4");function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=Object(f.fromJS)({title:"",display:null,slide:null,layers:[],layersInfo:{},widgets:[]});var tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=e.get("layersInfo");switch(n){case Me.LOAD_SHARE_DISPLAY_SUCCESS:return e.set("title",a.display.name).set("display",a.display).set("slide",a.slide).set("layers",a.slide.relations).set("widgets",a.widgets).set("layersInfo",a.slide.relations.reduce(function(e,t){return e[t.id]=t.type===Xe.a.Chart?{datasource:{resultList:[]},loading:!1,queryParams:{linkageFilters:[],globalFilters:[],params:[],linkageParams:[],globalParams:[]},interactId:"",renderType:"rerender"}:{loading:!1},e},{}));case Me.LOAD_SHARE_DISPLAY_FAILURE:return e.set("display",null).set("slide",null).set("layers",[]).set("widgets",[]).set("layersInfo",{});case Me.LOAD_LAYER_DATA:return e.set("layersInfo",Object.assign({},r,$e({},a.layerId,Object.assign({},r[a.layerId],{loading:!0}))));case Me.LOAD_LAYER_DATA_SUCCESS:return e.set("layersInfo",Object.assign({},r,$e({},a.layerId,Object.assign({},r[a.layerId],{loading:!1,datasource:a.data,renderType:a.renderType}))));case Me.LOAD_LAYER_DATA_FAILURE:return e.set("loadings",Object.assign({},r,$e({},a.layerId,Object.assign({},r[a.layerId],{loading:!1}))));default:return e}},nt=n("21677e23133eca295df8"),at=n.n(nt);function rt(e,t,n){return{type:Me.LOAD_SHARE_DISPLAY_SUCCESS,payload:{display:e,slide:t,widgets:n}}}function ot(e){return{type:Me.LOAD_SHARE_DISPLAY_FAILURE,payload:{error:e}}}function ct(e,t,n){return{type:Me.LOAD_LAYER_DATA_SUCCESS,payload:{renderType:e,layerId:t,data:n}}}var it=regeneratorRuntime.mark(dt),st=regeneratorRuntime.mark(ft),lt=regeneratorRuntime.mark(bt),ut=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n};function dt(e){var t,n,a,r,o,c,i,s,l,u;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.token,a=t.resolve,r=t.reject,d.prev=1,d.next=4,Object(F.b)(N.a,"".concat(G.a.share,"/display/").concat(n));case 4:if(o=d.sent,c=o.header,i=o.payload,401!==c.code){d.next=11;break}return r(c.msg),d.next=10,Object(F.c)(ot(c.msg));case 10:return d.abrupt("return");case 11:return l=(s=i).slides,u=s.widgets,d.next=15,Object(F.c)(rt(s,l[0],u));case 15:a(s,l[0],u),d.next=25;break;case 18:return d.prev=18,d.t0=d.catch(1),at.a.destroy(),d.next=23,Object(F.c)(ot(d.t0));case 23:at.a.error("\u83b7\u53d6 Display \u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"),r(d.t0);case 25:case"end":return d.stop()}},it,this,[[1,18]])}function ft(e){var t,n,a,r,o,c,i,s,l,u,d,f,b,p;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.renderType,a=t.layerId,r=t.dataToken,o=t.params,c=o.filters,i=o.linkageFilters,s=o.globalFilters,l=o.params,u=o.linkageParams,d=o.globalParams,f=ut(o,["filters","linkageFilters","globalFilters","params","linkageParams","globalParams"]),g.prev=3,g.next=6,Object(F.b)(N.a,{method:"post",url:"".concat(G.a.share,"/data/").concat(r),data:Object.assign({},f,{filters:c.concat(i).concat(s),params:l.concat(u).concat(d)})});case 6:return b=g.sent,p=b.payload.resultList,b.payload.resultList=p&&p.slice(0,500)||[],g.next=11,Object(F.c)(ct(n,a,b.payload));case 11:g.next=17;break;case 13:return g.prev=13,g.t0=g.catch(3),g.next=17,Object(F.c)((m=g.t0,{type:Me.LOAD_LAYER_DATA_FAILURE,payload:{error:m}}));case 17:case"end":return g.stop()}var m},st,this,[[3,13]])}function bt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[Object(T.c)(Me.LOAD_SHARE_DISPLAY,dt),Object(T.b)(Me.LOAD_LAYER_DATA,ft)];case 2:case"end":return e.stop()}},lt,this)}var pt=n("2860e44c6e29f1dccca0"),gt=n("f10f809a0f3792f3a22d"),mt=function(e){return e.get("shareDisplay")};function ht(e){return(ht="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ot(e,t){return!t||"object"!==ht(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt=n("26317c735995b6f84276"),jt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ot(this,St(t).call(this,e))).charts={},n.getChartData=function(e,t,a,r){var o,c,i,s,l,u=n.props,d=u.widgets,f=u.layersInfo,b=u.onLoadLayerData,p=d.find(function(e){return e.id===a}),g=JSON.parse(p.config),m=g.cols,h=g.rows,y=g.metrics,v=g.filters,O=g.color,S=g.label,I=g.size,w=g.xAxis,j=g.tip,A=g.orders,D=g.cache,L=g.expired,_=f[t].queryParams;r?(o=void 0!==r.linkageFilters?r.linkageFilters:_.linkageFilters,c=void 0!==r.globalFilters?r.globalFilters:_.globalFilters,i=r.params||_.params,s=r.linkageParams||_.linkageParams,l=r.globalParams||_.globalParams):(o=_.linkageFilters,c=_.globalFilters,i=_.params,s=_.linkageParams,l=_.globalParams);var E=m.concat(h).filter(function(e){return"\u6307\u6807\u540d\u79f0"!==e.name}).map(function(e){return e.name}),k=y.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}});O&&(E=E.concat(O.items.map(function(e){return e.name}))),S&&(E=E.concat(S.items.filter(function(e){return"category"===e.type}).map(function(e){return e.name})),k=k.concat(S.items.filter(function(e){return"value"===e.type}).map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),I&&(k=k.concat(I.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),w&&(k=k.concat(w.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),j&&(k=k.concat(j.items.map(function(e){return{column:Object(me.e)(e.name),func:e.agg}}))),b(e,t,p.dataToken,{groups:E,aggregators:k,filters:v.map(function(e){return e.config.sql}),linkageFilters:o,globalFilters:c,params:i,linkageParams:s,globalParams:l,orders:A,cache:D,expired:L})},n.renderChart=function(e,t,a,r,o){var c=n.charts["widget_".concat(e)];Object(pt.a)({dataSource:a,chartInfo:r,chartParams:Object.assign({id:t.id,name:t.name,desc:t.desc,flatTable_id:t.viewId,widgetlib_id:t.type},JSON.parse(t.config).chartParams),interactIndex:o}).then(function(e){c.setOption(e),c.hideLoading()})},n.getSlideStyle=function(e){var t,a=n.state.scale,r=e.width,o=e.height,c=e.backgroundColor,i=(e.opacity,e.backgroundImage);if(t={overflow:"visible",width:"".concat(r*a[0],"px"),height:"".concat(o*a[1],"px")},c){var s=c.join();t.backgroundColor="rgb(".concat(s,")")}return i&&(t.backgroundImage='url("'.concat(i,'")')),t},n.loadShareContent=function(){(0,n.props.onLoadDisplay)(n.state.shareInfo,function(){console.log("share page need login...")},function(){n.setState({showLogin:!0})})},n.handleLegitimateUser=function(){n.setState({showLogin:!1},function(){n.loadShareContent()})},n.state={scale:[1,1],showLogin:!1,shareInfo:""},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,a["Component"]),n=t,(r=[{key:"componentWillMount",value:function(){var e=this,t=this.props.location.query.shareInfo;this.setState({shareInfo:t},function(){e.loadShareContent()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.slide,n=yt(this.state.scale,2),a=n[0],r=n[1];if(t&&this.props.slide!==t){var o=JSON.parse(t.config).slideParams,c=o.scaleMode,i=o.width,s=o.height,l=document.body,u=l.clientHeight,d=l.clientWidth,f=1,b=1;switch(c){case"scaleHeight":b=f=u/s;break;case"scaleWidth":f=b=d/i;break;case"scaleFull":f=u/s,b=d/i}r===f&&a===b||this.setState({scale:[b,f]})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.widgets,o=t.display,i=t.slide,s=t.layers,l=t.layersInfo,u=this.state,d=u.scale,f=u.showLogin,b=u.shareInfo,p=f?a.createElement(Re,{shareInfo:b,legitimateUser:this.handleLegitimateUser}):null,g=null;if(o){var m=this.getSlideStyle(JSON.parse(i.config).slideParams),h=Array.isArray(r)?s.map(function(t){var n=r.find(function(e){return e.id===t.widgetId}),o={model:n&&n.model},c=t.id,i=t.params,s=i.polling,u=i.frequency,f=l[c],b=f.datasource,p=f.loading,g=f.interactId,m=f.renderType;return a.createElement(gt.a,{key:t.id,pure:!0,scale:d,itemId:c,widget:n,view:o,datasource:b,layer:t,loading:p,polling:s,frequency:u,interactId:g,renderType:m,onGetChartData:e.getChartData})}):null;g=a.createElement("div",{className:wt.board,style:m},h)}return a.createElement("div",{className:wt.preview},a.createElement(c.a,{title:n}),g,p)}}])&&vt(n.prototype,r),o&&vt(n,o),t}(),At=Object(s.b)({title:Object(s.a)(mt,function(e){return e.get("title")}),display:Object(s.a)(mt,function(e){return e.get("display")}),slide:Object(s.a)(mt,function(e){return e.get("slide")}),layers:Object(s.a)(mt,function(e){return e.get("layers")}),widgets:Object(s.a)(mt,function(e){return e.get("widgets")}),layersInfo:Object(s.a)(mt,function(e){return e.get("layersInfo")})});var Dt=Object(i.connect)(At,function(e){return{onLoadDisplay:function(t,n,a){return e(function(e,t,n){return{type:Me.LOAD_SHARE_DISPLAY,payload:{token:e,resolve:t,reject:n}}}(t,n,a))},onLoadLayerData:function(t,n,a,r){return e(function(e,t,n,a){return{type:Me.LOAD_LAYER_DATA,payload:{renderType:e,layerId:t,dataToken:n,params:a}}}(t,n,a,r))}}}),Lt=Object(u.a)({key:"shareDisplay",reducer:tt}),_t=Object(d.a)({key:"shareDisplay",saga:bt}),Et=Object(l.compose)(Lt,_t,Dt)(jt);n.d(t,"a",function(){return Rt});var kt=function(e){console.error("Dynamic page loading failed",e)},Pt=function(e){return function(t){e(null,t.default)}};function Rt(e){return[{path:"/share/dashboard",component:Ze},{path:"/share/display",component:Et},{path:"*",name:"notfound",getComponent:function(e,t){n.e(2).then(n.bind(null,"8937ca26cad1b574ef33")).then(Pt(t)).catch(kt)}}]}},2:function(e,t,n){n("5b15df55c1316f23e9d0"),e.exports=n("baf7021f8a6fabdc859e")},"295b38b8ebc92b4cd77f":function(e,t,n){"use strict";var a=n("ab4cb61bcb2dc161defb"),r=n("54f683fcda7806277002"),o=n("3ad3c1378076e862aab0"),c=n("74431d47afb6248fcb69"),i=n("4e2e9348dad8fe460c1d"),s=n("64609e458c41f180e307"),l=Object(r.fromJS)({locationBeforeTransitions:null});function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.LOCATION_CHANGE:return e.merge({locationBeforeTransitions:t.payload});default:return e}}n.d(t,"a",function(){return f});var d=Object(c.a)();function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[d,Object(o.routerMiddleware)(t)],c=a.compose,l=Object(a.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.combineReducers)(Object.assign({route:u,language:s.a},e))}(),Object(r.fromJS)(e),c(a.applyMiddleware.apply(void 0,n)));return l.runSaga=d.run,l.injectedReducers={},l.injectedSagas={},l}},"6b84bc0ba52f69619b39":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=n("db3f152bc7e049b9271e");function r(e,t,n,r){return{type:a.b,payload:{username:e,password:t,shareInfo:n,resolve:r}}}function o(e){return{type:a.a,payload:{user:e}}}},baf7021f8a6fabdc859e:function(e,t,n){"use strict";n.r(t),function(e){n("8c8e4f08a118a28666b0");var t=n("8af190b70a6bc55c6f1b"),a=n("63f14ac74ce296f77f4d"),r=n("d7dd51e1bf6bfc2c9c3d"),o=n("657e23e47d6bc2372772"),c=n("3ad3c1378076e862aab0"),i=n("3e48a4ad164080264b3b"),s=n("66d806c6556aa1e94936"),l=n("be54f4964cb3d17da652"),u=n("3c6f77ec51e7bc1a2a2a"),d=n("8f1ab66ca98a22c9179d"),f=(n("1fa8f1fa59fdd9f24c28"),n("4ce54d943eb1f3decabb"),n("295b38b8ebc92b4cd77f")),b=n("ed636e9c6a0f78dd7081"),p=n("162badf8105dc7af2987"),g=(n("0b67099f0eabd3c2641b"),n("ed0aa665d8cc7f062de1"),n("1dad865dd74034286d56"),n("3670a75cdf40147fed09"),n("360199e61df61d70683e"),n("8a7df9b2a2fe5d99ea98"),n("c302bbd821e068aec7ca"),n("488186eb3b2e0c1c414a"),n("40f52d283acb8661d97f"),n("1a8a0d02691ba2237e1c"),n("c4f39450f01ceef3e1a4")),m=(n("9c18a49d5131280d62e2"),n("df7d0ca888dfc4ab84c0"),n("c75488ff72785c93e091"),n("9522c301b87f3097acdb"),n("c051faebbdca1b75abc0"),n("e7db2ab4d56937661155"),n("6350ba3c445cdf809f5d"),n("6d75da2315198816512d"),n("2e326f71ba041e9e5483"),n("32ed649d5a98409f05d0"),n("593fb6ed96492637817d"),n("0c83eda191a155223e4f"),n("70ed4cbab24ae23bde7d"),n("38209c7bc1e9aed95306"),n("9132142da73ea939e5d6"),n("ba53a5f89c617e663ad1"),n("8835a003a3ed67b22811"),n("8c6d270aa08c18b72e43"),n("0a240ff6093590e2060b"),n("61d2dc633a96c99ada22"),n("ed842d3aa93065270196"),n("4b78455cac8a29b25e34"),n("7e08bdc8c06aba9df8ea"),n("58a6adeccb3334926a24"),n("cf137f88cec7945b84a3"),n("d3c16768a7bfb407293b"),n("e4fef1df9c12fbaaf823"),n("545cc1d5b2c0ab4381ef"));g.registerTheme("default",m.n);var h=Object(f.a)({},o.d),y=document.getElementById("app"),v=Object(c.syncHistoryWithStore)(o.d,h,{selectLocationState:Object(u.a)()}),O={path:"/",component:Object(s.hot)(e)(l.a),childRoutes:Object(p.a)(h),indexRoute:{onEnter:function(e,t){t("/share")}}},S=function(e){a.render(t.createElement(r.Provider,{store:h},t.createElement(d.a,{messages:e},t.createElement(o.b,{history:v,routes:O,render:Object(o.c)(Object(i.useScroll)())}))),y)};window.Intl?S(b.b):new Promise(function(e){e(Promise.all([n.e(0),n.e(3)]).then(n.t.bind(null,"97694e21b72f8e9351c4",7)))}).then(function(){return Promise.all([n.e(0).then(n.t.bind(null,"f030ad8f70186ef5cb63",7))])}).then(function(){return S(b.b)}).catch(function(e){throw e}),window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.inject=function(){})}.call(this,n("044f282f6141fc605782")(e))},be54f4964cb3d17da652:function(e,t,n){"use strict";var a=n("8af190b70a6bc55c6f1b"),r=n("0d7f0986bcd2f33d8a2a"),o=n.n(r),c=n("ab4cb61bcb2dc161defb"),i=n("811a4999285c4f950f0a"),s=n("fe25efaa8d6f45e3f5f9"),l=n("db3f152bc7e049b9271e"),u=n("54f683fcda7806277002"),d=Object(u.fromJS)({logged:!1,loginUser:null});var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case l.a:return e.set("logged",!0).set("loginUser",a.user);case l.c:return e.set("logged",!1).set("loginUser",null);default:return e}},b=n("74431d47afb6248fcb69"),p=n("6c68d13fe9e3e77d8fc4"),g=n("6b84bc0ba52f69619b39"),m=n("95066b9b78a83cfbe91a"),h=n("55c69f0ea731e712b8f3"),y=n("959a9acaa46191dd629e"),v=regeneratorRuntime.mark(S),O=regeneratorRuntime.mark(I);function S(e){var t,n,a,r,o,c;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.username,a=t.password,r=t.shareInfo,o=t.resolve,i.prev=1,i.next=4,Object(p.b)(m.a,{method:"post",url:"".concat(y.a.share,"/login/").concat(r),data:{username:n,password:a}});case 4:return c=i.sent,i.next=7,Object(p.c)(Object(g.a)(c.payload));case 7:o(),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(1),Object(h.a)(i.t0);case 13:case"end":return i.stop()}},v,this,[[1,10]])}function I(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[Object(b.c)(l.b,S)];case 2:case"end":return e.stop()}},O,this)}var w=Object(i.a)({key:"global",reducer:f}),j=Object(s.a)({key:"global",saga:I});t.a=Object(c.compose)(w,j)(function(e){return a.createElement("div",null,a.createElement(o.a,{titleTemplate:"%s - Davinci",defaultTitle:"Davinci Web Application",meta:[{name:"description",content:"Davinci web application built for data visualization"}]}),a.Children.toArray(e.children))})},db3f152bc7e049b9271e:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o});var a="davinci/App/LOGIN",r="davinci/App/LOGGED",o="davinci/App/LOGOUT"}},[[2,6,0,1]]]);